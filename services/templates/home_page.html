{%extends 'base_page.html'%}

{%load static%}
{%block content%}
<div class="list-body">
    <div class="services">
        <ol class="list-group">
            {% for case in cases %}
            <li class="list-group-item d-flex justify-content-between align-items-start custom-list-spacing"
            onclick="redirectToDetail('case/{{case.slug}}')" id="case"
            >
            <div class="ms-2 me-auto text-white-50" id="description">
                <div class="fw-bold text-white" id="title">{{case.title}}</div>
                {{case.slug}}
            </div>
            {% if not case.status %}
            <span class="badge bg-primary rounded-pill">PENDING</span>
            {%else%}
            <span class="badge bg-success rounded-pill">RESOLVED</span>
            {%endif%}
            <div style="
            margin-bottom:1%;
            width:5%;
            ">
            {% comment %} add purge service button here {% endcomment %}
                <button type="button" class="btn-close btn-close-white" aria-label="Close" style="float:right;" onclick=""></button>
            </div>
            </li>
            {%endfor%}
        </ol>
    </div>
</div>
{%endblock content%}
{%block scripts%}
<script>
    const search = document.getElementById('search');
    const results = document.querySelectorAll('[id=case]');
    search.value = ""
    let search_term = '';
    search.addEventListener('input', (event) => {
        search_term = event.target.value.toLowerCase();
        showList();
      });
    const showList = () => {
        for(var i = 0; i < results.length; i++){
            const node_title = results[i].querySelector("#description").querySelector("#title").innerHTML.toLowerCase();
            if(node_title.includes(search_term)){
                results[i].classList.remove("hide-element");
            }
            else{
                results[i].classList.add("hide-element");
            }
        }
      };
</script>
{%endblock scripts%}